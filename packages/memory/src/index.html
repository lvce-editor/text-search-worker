<!doctype html>
<html>
  <head>
    <title>Text Search Worker Memory Test</title>
  </head>
  <body>
    <script>
      window.__workerReady = false
      window.__workerError = null

      const worker = new Worker('/dist/textSearchWorkerMain.js')

      worker.onmessage = (event) => {
        if (event.data === 'ready') {
          window.__workerReady = true
        }
      }

      worker.onerror = (error) => {
        window.__workerError = error.message
        console.error('Worker error:', error)
      }

      // Trigger some searches to measure memory
      worker.postMessage({
        id: 1,
        method: 'textSearch',
        params: ['file:///', 'test', {}, '/'],
      })
    </script>
  </body>
</html>
