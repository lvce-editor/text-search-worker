<!doctype html>
<html>
  <head>
    <title>Text Search Worker Memory Test</title>
  </head>
  <body>
    <script>
      window.__workerDidLaunch = 0 // 0: not launched, 1: launched, 2: error

      const worker = new Worker('/dist/textSearchWorkerMain.js')

      worker.onmessage = (event) => {
        if (event.data === 'ready') {
          window.__workerDidLaunch = 1
        }
      }

      worker.onerror = (error) => {
        window.__workerDidLaunch = 2
        console.error('Worker error:', error)
      }

      // Trigger some searches to measure memory
      worker.postMessage({
        id: 1,
        method: 'textSearch',
        params: ['file:///', 'test', {}, '/'],
      })
    </script>
  </body>
</html>
